; PlatformIO Project Configuration File for GeekWatch Firmware
; Build options: build flags, source filter
; Upload options: custom upload port, speed and extra flags
; Library options: dependencies, extra library storages
; Advanced options: extra scripting

[platformio]
default_envs = geekwatch

[env:geekwatch]
platform = nordicnrf52
board = adafruit_feather_nrf52840
framework = arduino

; Build options
build_flags = 
    -DNRF52840_XXAA
    -DARDUINO_NRF52_ADAFRUIT
    -DCFG_DEBUG=0
    -DCONFIG_NFCT_PINS_AS_GPIOS
    -D__HEAP_SIZE=8192
    -D__STACK_SIZE=8192
    ; Display configuration
    -DDISPLAY_WIDTH=160
    -DDISPLAY_HEIGHT=68
    ; Audio configuration
    -DI2S_ENABLED=1

; Upload protocol (UF2 bootloader)
; Note: PlatformIO doesn't support UF2 direct upload
; Build creates .hex file, manually copy to UF2 drive after double-tap reset
; Or use: pio run && uf2conv.py .pio/build/geekwatch/firmware.hex -o firmware.uf2
upload_protocol = nrfutil
upload_speed = 115200
; Uncomment below if you add J-Link programmer for debugging
; upload_protocol = jlink

; Serial monitor
monitor_speed = 115200
monitor_filters = direct

; Library dependencies
lib_deps = 
    adafruit/Adafruit GFX Library @ ^1.11.9
    adafruit/Adafruit BusIO @ ^1.16.1
    ; Using custom display driver (no Sharp Memory library needed)
    ; Note: May need custom I2S library for nRF52

; Debug tool (optional, requires J-Link)
; debug_tool = jlink
; debug_init_break = tbreak setup
